(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t){e.exports={REGISTER:"REGISTER",NEW_USER:"NEW_USER",EXISTING_USER:"EXISTING_USER",GET_USER_DATA:"GET_USER_DATA",SET_USER_DATA:"SET_USER_DATA",SUCCESS:"SUCCESS",ERROR:"ERROR",RESET:"RESET",LOGOUT:"LOGOUT",GET_TOKEN:"GET_TOKEN"}},39:function(e,t,n){e.exports=n(71)},44:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"verify",function(){return N}),n.d(r,"login",function(){return j}),n.d(r,"register",function(){return _}),n.d(r,"getUserData",function(){return w}),n.d(r,"alertSuccess",function(){return U}),n.d(r,"alertError",function(){return k}),n.d(r,"reset",function(){return A}),n.d(r,"getToken",function(){return C}),n.d(r,"logout",function(){return G});var a=n(0),o=n.n(a),s=n(35),u=n.n(s);n(44),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(45);var i=n(10),c=n(3),l=n(11),p=n(1),m={user:null,isRegistered:null,token:null},E={response:null,error:null},d=Object(c.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.REGISTER:return{user:t.user};case p.GET_USER_DATA:return Object(l.a)({},e,{user:t.user});case p.GET_TOKEN:var n=sessionStorage.getItem("user"),r=null===n?null:JSON.parse(n).token;return Object(l.a)({},e,{token:r});case p.SET_USER_DATA:return console.log(p.SET_USER_DATA,t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),Object(l.a)({},e,{token:t.user.token});case p.LOGOUT:return sessionStorage.removeItem("user"),{user:null,isRegistered:null,token:null};case p.NEW_USER:return console.log(p.NEW_USER,t),Object(l.a)({},e,{isRegistered:t.error.isRegistered});case p.EXISTING_USER:return console.log(p.EXISTING_USER,t),Object(l.a)({},e,{isRegistered:t.data.isRegistered});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.SUCCESS:return console.log(t),Object(l.a)({},e,{response:t.response});case p.ERROR:return Object(l.a)({},e,{error:t.error});case p.RESET:return{response:null,error:null};default:return e}}}),h=n(37),f=n(22),b=n(17),g=n(12),S=n(13),R=n(15),v=n(14),O=n(16),T=n(20),y=n.n(T),N=function(e){return function(t){return y.a.post("".concat("","/auth/verify"),e).then(function(e){console.log(e.data),t({type:p.EXISTING_USER,data:e.data})}).catch(function(e){console.error(e.response),406===e.response.status&&(t({type:p.NEW_USER,error:e.response.data}),t(k(e.response.data)),setTimeout(function(){return t(A())},2500))})}},j=function(e){return function(t){return y.a.post("".concat("","/auth/login"),e).then(function(e){t({type:p.SET_USER_DATA,user:e.data})}).catch(function(e){console.log(e),t(k(e.response.data)),setTimeout(function(){return t(A())},2500)})}},_=function(e){return function(t){return y.a.post("".concat("","/auth/register"),e).then(function(e){console.log(e.data),t(U(e.data)),t({type:p.SET_USER_DATA,user:e.data}),setTimeout(function(){return t(A())},2500)}).catch(function(e){console.log(e),t(k(e.response.data)),setTimeout(function(){return t(A())},2500)})}},w=function(){return function(e,t){var n=t().user;return y.a.get("".concat("","/user/details"),{headers:{Authorization:n.token}}).then(function(t){e({type:p.GET_USER_DATA,user:t.data})})}},U=function(e){return{type:p.SUCCESS,response:e}},k=function(e){return{type:p.ERROR,error:e}},A=function(){return{type:p.RESET}},C=function(){return{type:p.GET_TOKEN}},G=function(){return{type:p.LOGOUT}},I=(n(68),function(e){function t(){return Object(g.a)(this,t),Object(R.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return this.props.notifications.response?o.a.createElement("div",{className:"wrapper success"},this.props.notifications.response.msg):this.props.notifications.error?o.a.createElement("div",{className:"wrapper error"},this.props.notifications.error.msg):null}}]),t}(a.Component));var D=Object(i.b)(function(e){return{notifications:e.notifications}},function(e){return{action:Object(c.b)(r,e)}})(I),x=function(e){function t(){return Object(g.a)(this,t),Object(R.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){this.props.action.getToken()}},{key:"render",value:function(){return this.props.user.token?o.a.createElement(b.a,{to:{pathname:"/home"}}):o.a.createElement("div",null,o.a.createElement(D,null),o.a.createElement(b.a,{to:{pathname:"/login"}}))}}]),t}(a.Component);var W=Object(i.b)(function(e){return{user:e.user}},function(e){return{action:Object(c.b)(r,e)}})(x),q=function(e){function t(){return Object(g.a)(this,t),Object(R.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.action.getUserData()}},{key:"logout",value:function(){this.props.action.logout()}},{key:"render",value:function(){var e=this;return null===this.props.token?o.a.createElement(b.a,{to:{pathname:"/login"}}):o.a.createElement("div",{className:"container"},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("h2",null,"Welcome"),o.a.createElement("h1",null,this.props.user.user?this.props.user.user.name:null),o.a.createElement("h5",null,this.props.user.user?this.props.user.user.email:null),o.a.createElement("button",{onClick:function(){return e.logout()},className:"btn btn-info"},"Logout")))}}]),t}(a.Component);var L=Object(i.b)(function(e){return{user:e.user}},function(e){return{action:Object(c.b)(r,e)}})(q),X=(n(70),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(R.a)(this,Object(v.a)(t).call(this,e))).emailRe=new RegExp("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$"),n.passRe=new RegExp("[0-9].+"),n.state={username:null,name:null,email:null,mobileNumber:null,password:null,otp:null},n}return Object(O.a)(t,e),Object(S.a)(t,[{key:"onFormSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({email:this.emailRe.test(this.state.username)?this.state.username:this.state.email,mobileNumber:this.passRe.test(this.state.username)?this.state.username:this.state.mobileNumber},function(){!t.state.email&&!t.state.mobileNumber||t.state.password||t.state.otp?t.state.email&&t.state.password&&t.state.mobileNumber&&t.state.name?t.props.action.register(t.state):t.state.email&&t.state.password||t.state.mobileNumber&&t.state.otp?t.props.action.login(t.state):(t.props.action.alertError({msg:"Please enter valid input!"}),setTimeout(function(){return t.props.action.reset()},2500)):t.props.action.verify(t.state)})}},{key:"render",value:function(){var e=this,t=null;return null!==this.state.username&&null!==this.props.user.isRegistered&&(t=this.props.user.isRegistered?this.emailRe.test(this.state.username)?o.a.createElement("input",{type:"password",className:"input",placeholder:"Enter your password",required:!0,onChange:function(t){return e.setState({password:t.target.value})}}):o.a.createElement("input",{type:"number",className:"input",min:"000000",max:"999999",placeholder:"Enter OTP",required:!0,onChange:function(t){return e.setState({otp:t.target.value})}}):o.a.createElement("div",null,this.emailRe.test(this.state.username)?o.a.createElement("input",{type:"text",className:"input",placeholder:"Enter mobile number",required:!0,onChange:function(t){return e.setState({mobileNumber:t.target.value})}}):o.a.createElement("input",{type:"email",className:"input",placeholder:"Enter email",required:!0,onChange:function(t){return e.setState({email:t.target.value})}}),o.a.createElement("input",{type:"password",className:"input",placeholder:"Enter your password",required:!0,onChange:function(t){return e.setState({password:t.target.value})}}),o.a.createElement("input",{type:"name",className:"input",placeholder:"Enter your name",required:!0,onChange:function(t){return e.setState({name:t.target.value})}}))),o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"row full"},o.a.createElement("div",{className:"col-sm-12 col-md-8 col-lg-6 box"},o.a.createElement("h2",null,null===this.props.user.isRegistered||!1!==this.props.user.isRegistered?"Login":"Register"),o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},o.a.createElement("form",{onSubmit:function(t){return e.onFormSubmit(t)}},o.a.createElement("input",{type:"text",className:"input",placeholder:"Enter email or mobile number",required:!0,onChange:function(t){return e.setState({username:t.target.value})}}),t,o.a.createElement("div",{className:"btn-holder"},o.a.createElement("button",{type:"submit"},">"))))))))))}}]),t}(a.Component));var J=Object(i.b)(function(e){return{user:e.user}},function(e){return{action:Object(c.b)(r,e)}})(X),K=Object(c.d)(d,Object(c.a)(h.a)),B=o.a.createElement(i.a,{store:K},o.a.createElement(f.a,null,o.a.createElement("div",null,o.a.createElement(b.b,{path:"/",component:W}),o.a.createElement(b.b,{path:"/login",component:J}),o.a.createElement(b.b,{path:"/home",component:L}))));u.a.render(B,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.7ea55f46.chunk.js.map